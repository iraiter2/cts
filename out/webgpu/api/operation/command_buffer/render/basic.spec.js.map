{"version":3,"sources":["../../../../../../src/webgpu/api/operation/command_buffer/render/basic.spec.ts"],"names":["description","makeTestGroup","GPUTest","g","test","fn","t","dst","device","createBuffer","size","usage","GPUBufferUsage","COPY_SRC","COPY_DST","colorAttachment","createTexture","format","width","height","depth","GPUTextureUsage","OUTPUT_ATTACHMENT","colorAttachmentView","createView","encoder","createCommandEncoder","pass","beginRenderPass","colorAttachments","attachment","loadValue","r","b","a","storeOp","endPass","copyTextureToBuffer","texture","mipLevel","origin","x","y","z","buffer","bytesPerRow","defaultQueue","submit","finish","expectContents","Uint8Array"],"mappings":";;;;AAAA,OAAO,MAAMA,WAAW,GAAI;;CAArB;AAIP,SAASC,aAAT,QAA8B,+CAA9B;AACA,SAASC,OAAT,QAAwB,yBAAxB;AAEA,OAAO,MAAMC,CAAC,GAAGF,aAAa,CAACC,OAAD,CAAvB;AAEPC,CAAC,CAACC,IAAF,CAAO,OAAP,EAAgBC,EAAhB,CAAmB,MAAMC,CAAN,IAAW;AAC5B,QAAMC,GAAG,GAAGD,CAAC,CAACE,MAAF,CAASC,YAAT,CAAsB;AAChCC,IAAAA,IAAI,EAAE,CAD0B;AAEhCC,IAAAA,KAAK,EAAEC,cAAc,CAACC,QAAf,GAA0BD,cAAc,CAACE;AAFhB,GAAtB,CAAZ;AAKA,QAAMC,eAAe,GAAGT,CAAC,CAACE,MAAF,CAASQ,aAAT,CAAuB;AAC7CC,IAAAA,MAAM,EAAE,YADqC;AAE7CP,IAAAA,IAAI,EAAE;AAAEQ,MAAAA,KAAK,EAAE,CAAT;AAAYC,MAAAA,MAAM,EAAE,CAApB;AAAuBC,MAAAA,KAAK,EAAE;AAA9B,KAFuC;AAG7CT,IAAAA,KAAK,EAAEU,eAAe,CAACR,QAAhB,GAA2BQ,eAAe,CAACC;AAHL,GAAvB,CAAxB;AAKA,QAAMC,mBAAmB,GAAGR,eAAe,CAACS,UAAhB,EAA5B;AAEA,QAAMC,OAAO,GAAGnB,CAAC,CAACE,MAAF,CAASkB,oBAAT,EAAhB;AACA,QAAMC,IAAI,GAAGF,OAAO,CAACG,eAAR,CAAwB;AACnCC,IAAAA,gBAAgB,EAAE,CAChB;AACEC,MAAAA,UAAU,EAAEP,mBADd;AAEEQ,MAAAA,SAAS,EAAE;AAAEC,QAAAA,CAAC,EAAE,GAAL;AAAU7B,QAAAA,CAAC,EAAE,GAAb;AAAkB8B,QAAAA,CAAC,EAAE,GAArB;AAA0BC,QAAAA,CAAC,EAAE;AAA7B,OAFb;AAGEC,MAAAA,OAAO,EAAE;AAHX,KADgB;AADiB,GAAxB,CAAb;AASAR,EAAAA,IAAI,CAACS,OAAL;AACAX,EAAAA,OAAO,CAACY,mBAAR,CACE;AAAEC,IAAAA,OAAO,EAAEvB,eAAX;AAA4BwB,IAAAA,QAAQ,EAAE,CAAtC;AAAyCC,IAAAA,MAAM,EAAE;AAAEC,MAAAA,CAAC,EAAE,CAAL;AAAQC,MAAAA,CAAC,EAAE,CAAX;AAAcC,MAAAA,CAAC,EAAE;AAAjB;AAAjD,GADF,EAEE;AAAEC,IAAAA,MAAM,EAAErC,GAAV;AAAesC,IAAAA,WAAW,EAAE;AAA5B,GAFF,EAGE;AAAE3B,IAAAA,KAAK,EAAE,CAAT;AAAYC,IAAAA,MAAM,EAAE,CAApB;AAAuBC,IAAAA,KAAK,EAAE;AAA9B,GAHF;AAKAd,EAAAA,CAAC,CAACE,MAAF,CAASsC,YAAT,CAAsBC,MAAtB,CAA6B,CAACtB,OAAO,CAACuB,MAAR,EAAD,CAA7B;AAEA1C,EAAAA,CAAC,CAAC2C,cAAF,CAAiB1C,GAAjB,EAAsB,IAAI2C,UAAJ,CAAe,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,CAAf,CAAtB;AACD,CAhCD","sourcesContent":["export const description = `\nBasic command buffer rendering tests.\n`;\n\nimport { makeTestGroup } from '../../../../../common/framework/test_group.js';\nimport { GPUTest } from '../../../../gpu_test.js';\n\nexport const g = makeTestGroup(GPUTest);\n\ng.test('clear').fn(async t => {\n  const dst = t.device.createBuffer({\n    size: 4,\n    usage: GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST,\n  });\n\n  const colorAttachment = t.device.createTexture({\n    format: 'rgba8unorm',\n    size: { width: 1, height: 1, depth: 1 },\n    usage: GPUTextureUsage.COPY_SRC | GPUTextureUsage.OUTPUT_ATTACHMENT,\n  });\n  const colorAttachmentView = colorAttachment.createView();\n\n  const encoder = t.device.createCommandEncoder();\n  const pass = encoder.beginRenderPass({\n    colorAttachments: [\n      {\n        attachment: colorAttachmentView,\n        loadValue: { r: 0.0, g: 1.0, b: 0.0, a: 1.0 },\n        storeOp: 'store',\n      },\n    ],\n  });\n  pass.endPass();\n  encoder.copyTextureToBuffer(\n    { texture: colorAttachment, mipLevel: 0, origin: { x: 0, y: 0, z: 0 } },\n    { buffer: dst, bytesPerRow: 256 },\n    { width: 1, height: 1, depth: 1 }\n  );\n  t.device.defaultQueue.submit([encoder.finish()]);\n\n  t.expectContents(dst, new Uint8Array([0x00, 0xff, 0x00, 0xff]));\n});\n"],"file":"basic.spec.js"}